description: |
  This example illustrates asynchronous LocalStack startup, to optimize the build time by running your test initialization tasks in parallel.

  The sample first uses the `localstack/start` command to start up LocalStack in the background,
  then performs custom application initialization commands (illustrated via the first `echo` command),
  and then finally uses the `localstack/wait` command before proceeding with the actual application build logic (second `echo` command).

usage:
  version: 2.1

  orbs:
    localstack: localstack/platform@2.2

  jobs:
    localstack-test:
      executor: localstack/default
      steps:
        - localstack/ephemeral:
            auto_load_pod: circleci_test_pod
        - run:
            command: |
              echo "Running checks on my preloaded state..."
              awslocal sqs get-queue-url --queue-name=test-queue
              awslocal s3 ls s3://test

  workflows:
    localstack-test:
      jobs:
        - localstack-test
